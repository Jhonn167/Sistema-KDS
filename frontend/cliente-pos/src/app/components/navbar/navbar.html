<!-- src/app/components/navbar/navbar.component.html -->

<header class="app-header">
  <!-- SECCIÓN IZQUIERDA: LOGO Y NAVEGACIÓN -->
  <div class="header-left">
    <div class="app-icon">KDS</div>
    <h1>System</h1>

    <!-- El menú de navegación ahora es dinámico según el rol -->
    <ng-container *ngIf="authService.isLoggedIn(); else publicNav">
      <!-- NAV ADMIN -->
      <nav *ngIf="authService.isAdmin()" class="main-nav">
        <a routerLink="/pos" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Punto de Venta</a>
        <a routerLink="/admin/products" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Productos</a>
        <a routerLink="/admin/reports" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Reportes</a>
        <a routerLink="/kds" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Cocina</a>
        <a routerLink="/admin/users" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Usuarios</a>
      </nav>
      <!-- NAV EMPLEADO -->
      <nav *ngIf="authService.isEmpleado()" class="main-nav">
        <a routerLink="/pos" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Punto de Venta</a>
        <a routerLink="/admin/confirmations" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Confirmaciones</a>
      </nav>
      <!-- NAV COCINERO -->
      <nav *ngIf="authService.isCocinero()" class="main-nav">
        <a routerLink="/kds" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Cocina</a>
      </nav>
      <!-- NAV CLIENTE -->
      <nav *ngIf="authService.isCliente()" class="main-nav">
        <a routerLink="/menu" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Menú</a>
        <a routerLink="/mis-pedidos" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Mis Pedidos</a>
        <a routerLink="/galeria" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Galería</a>
      </nav>
    </ng-container>

    <!-- NAV PÚBLICA (PARA VISITANTES NO LOGUEADOS) -->
    <ng-template #publicNav>
      <nav class="main-nav">
        <a routerLink="/menu" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Menú</a>
        <a routerLink="/galeria" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Galería</a>
        <a routerLink="/nosotros" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Nosotros</a>
      </nav>
    </ng-template>
  </div>
  
  <!-- SECCIÓN DERECHA: ACCIONES DE CUENTA -->
  <div class="header-right">
    <button *ngIf="authService.isLoggedIn()" (click)="logout()" class="account-btn">
      <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
    </button>
    <a *ngIf="!authService.isLoggedIn()" routerLink="/login" class="account-btn">
      <i class="fas fa-user"></i> Iniciar Sesión
    </a>
    <!-- Botón de hamburguesa (solo visible en móvil) -->
    <button class="hamburger-button" (click)="toggleMenu()">
      <i class="fas fa-bars"></i>
    </button>
  </div>
</header>

<!-- MENÚ DESPLEGABLE PARA MÓVIL -->
<div class="mobile-menu" [class.is-active]="isMenuOpen">
  <!-- El contenido de la navegación se repite aquí para el menú móvil -->
  <!-- Puedes copiar y pegar los bloques <nav> de arriba si quieres que sean idénticos -->
  <ng-container *ngIf="authService.isLoggedIn(); else publicMobileNav">
    <nav *ngIf="authService.isAdmin()" class="mobile-nav-links">
      <a routerLink="/pos" (click)="closeMenu()">Punto de Venta</a>
      <a routerLink="/admin/products" (click)="closeMenu()">Productos</a>
      <!-- ... y así sucesivamente para todos los links de admin -->
    </nav>
    <!-- ... y así sucesivamente para los otros roles ... -->
  </ng-container>
  <ng-template #publicMobileNav>
      <nav class="mobile-nav-links">
        <a routerLink="/menu" (click)="closeMenu()">Menú</a>
        <a routerLink="/galeria" (click)="closeMenu()">Galería</a>
        <a routerLink="/nosotros" (click)="closeMenu()">Nosotros</a>
      </nav>
  </ng-template>
</div>
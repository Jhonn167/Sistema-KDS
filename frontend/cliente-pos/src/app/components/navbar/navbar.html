<!-- src/app/components/navbar/navbar.component.html -->

<header class="app-header">
  <!-- SECCIÓN IZQUIERDA: LOGO Y NAVEGACIÓN -->
  <div class="header-left">
    <div class="app-icon">KDS</div>
    <h1>System</h1>
    
    <!-- El menú de navegación ahora es dinámico según el rol -->
    <ng-container *ngIf="authService.isLoggedIn(); else publicNav">
      <!-- NAV ADMIN -->
      <nav *ngIf="authService.isAdmin()" class="main-nav">
        <a routerLink="/pos" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Point of Sale</a>
        <a routerLink="/admin/products" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Products</a>
        <a routerLink="/admin/reports" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Reports</a>
        <a routerLink="/admin/modifiers" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Modificadores</a>
        <a routerLink="/kds" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Kitchen</a>
        <a routerLink="/admin/users" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Users</a>
        <a routerLink="/admin/categories" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Categorías</a>
        <a routerLink="/admin/confirmations" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Confirmaciones</a>  
      </nav>
      <!-- NAV EMPLEADO -->
      <nav *ngIf="authService.isEmpleado()" class="main-nav">
        <a routerLink="/pos" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Point of Sale</a>
        <a routerLink="/admin/confirmations" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Confirmaciones</a>
      </nav>
      <!-- NAV COCINERO -->
      <nav *ngIf="authService.isCocinero()" class="main-nav">
        <a routerLink="/kds" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Kitchen</a>
      </nav>
      <!-- NAV CLIENTE -->
      <nav *ngIf="authService.isCliente()" class="main-nav">
        <a routerLink="/menu" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Menú</a>
        <a routerLink="/mis-pedidos" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Mis Pedidos</a>
        <a routerLink="/galeria" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Galería</a>
      </nav>
    </ng-container>

    <!-- NAV PÚBLICA (PARA VISITANTES NO LOGUEADOS) -->
    <ng-template #publicNav>
      <nav class="main-nav">
        <a routerLink="/menu" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Menú</a>
        <a routerLink="/galeria" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Galería</a>
        <a routerLink="/nosotros" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Nosotros</a>
        <a routerLink="/contacto" routerLinkActive="active" class="nav-link" (click)="closeMenu()">Contacto</a>
      </nav>
    </ng-template>
  </div>
  
  <!-- SECCIÓN DERECHA: ACCIONES DE CUENTA Y HAMBURGUESA -->
  <div class="header-right">
    <button *ngIf="authService.isLoggedIn()" (click)="logout()" class="account-btn">
      <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
    </button>
    <a *ngIf="!authService.isLoggedIn()" routerLink="/login" class="account-btn">
      <i class="fas fa-user"></i> Iniciar Sesión
    </a>
    <button class="hamburger-button" (click)="toggleMenu()">
      <i class="fas fa-bars"></i>
    </button>
  </div>
</header>

<!-- MENÚ DESPLEGABLE PARA MÓVIL (AHORA COMPLETO) -->
<div class="mobile-menu" [class.is-active]="isMenuOpen">
  <ng-container *ngIf="authService.isLoggedIn(); else publicMobileNav">
    <!-- Links Móviles para Administradores -->
    <nav *ngIf="authService.isAdmin()" class="mobile-nav-links">
      <a routerLink="/pos" (click)="closeMenu()">Point of Sale</a>
      <a routerLink="/admin/products" (click)="closeMenu()">Products</a>
      <a routerLink="/admin/reports" (click)="closeMenu()">Reports</a>
      <a routerLink="/kds" (click)="closeMenu()">Kitchen</a>
      <a routerLink="/admin/users" (click)="closeMenu()">Users</a>
      <a routerLink="/admin/categories" (click)="closeMenu()">Categorías</a>
      <a routerLink="/admin/confirmations" (click)="closeMenu()">Confirmaciones</a>
    </nav>
    <!-- Links Móviles para Empleados -->
    <nav *ngIf="authService.isEmpleado()" class="mobile-nav-links">
      <a routerLink="/pos" (click)="closeMenu()">Point of Sale</a>
      <a routerLink="/admin/confirmations" (click)="closeMenu()">Confirmaciones</a>
    </nav>
    <!-- Links Móviles para Cocineros -->
    <nav *ngIf="authService.isCocinero()" class="mobile-nav-links">
      <a routerLink="/kds" (click)="closeMenu()">Kitchen</a>
    </nav>
    <!-- Links Móviles para Clientes -->
    <nav *ngIf="authService.isCliente()" class="mobile-nav-links">
        <a routerLink="/menu" (click)="closeMenu()">Menú</a>
        <a routerLink="/mis-pedidos" (click)="closeMenu()">Mis Pedidos</a>
        <a routerLink="/galeria" (click)="closeMenu()">Galería</a>
        <a routerLink="/nosotros" (click)="closeMenu()">Nosotros</a>
        <a routerLink="/contacto" (click)="closeMenu()">Contacto</a>
    </nav>
  </ng-container>
  <ng-template #publicMobileNav>
      <nav class="mobile-nav-links">
        <a routerLink="/menu" (click)="closeMenu()">Menú</a>
        <a routerLink="/galeria" (click)="closeMenu()">Galería</a>
        <a routerLink="/nosotros" (click)="closeMenu()">Nosotros</a>
        <a routerLink="/contacto" (click)="closeMenu()">Contacto</a>
      </nav>
  </ng-template>
</div>
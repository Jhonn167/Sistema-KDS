<!-- src/app/pages/admin/product-form/product-form.component.html -->
<div class="form-container">
  <div class="header">
    <h1>{{ pageTitle }}</h1>
    <a routerLink="/admin/products" class="back-link">← Volver a la Lista</a>
  </div>
  
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="nombre">Nombre del Producto</label>
      <input type="text" id="nombre" formControlName="nombre">
    </div>

    <div class="form-group">
      <label for="descripcion">Descripción</label>
      <textarea id="descripcion" formControlName="descripcion" rows="3"></textarea>
    </div>

    <div class="form-group">
      <label for="precio">Precio</label>
      <input type="number" id="precio" formControlName="precio">
    </div>

    <div class="form-group">
      <label for="stock">Stock</label>
      <input type="number" id="stock" formControlName="stock">
    </div>

    <!-- Selector de Categoría -->
    <div class="form-group">
      <label for="categoria_id">Categoría</label>
      <select id="categoria_id" formControlName="categoria_id">
        <option [ngValue]="null">-- Sin Categoría --</option>
        <option *ngFor="let cat of categories" [value]="cat.id_categoria">{{ cat.nombre }}</option>
      </select>
    </div>

    <!-- Subida de Imagen -->
    <div class="form-group">
      <label for="imagen">Imagen del Producto</label>
      <img [src]="imageUrlPreview" *ngIf="imageUrlPreview" class="image-preview">
      <input type="file" (change)="onFileSelected($event)">
    </div>

    <!-- Asignación de Modificadores -->
    <div class="form-group" formArrayName="modifierGroups" *ngIf="allModifierGroups.length > 0">
        <label>Asignar Grupos de Modificadores</label>
        <div class="modifiers-checklist">
            <div *ngFor="let group of allModifierGroups; let i = index" class="checkbox-item">
                <input type="checkbox" [formControlName]="i" [id]="'group-' + group.id_grupo">
                <label [for]="'group-' + group.id_grupo">{{ group.nombre }}</label>
            </div>
        </div>
    </div>

    <button type="submit" [disabled]="productForm.invalid" class="submit-btn">
      {{ isEditMode ? 'Actualizar Producto' : 'Guardar Producto' }}
    </button>
  </form>
</div>
<div class="menu-container">
  <h1>Nuestro MenÃº</h1>
  <p>Busca y selecciona tus platillos favoritos</p>

  <div class="search-container">
    <input
      type="text"
      placeholder="ðŸ” Buscar (ej. Torta, Refresco...)"
      [(ngModel)]="searchTerm"
      (input)="filterProducts()"
      class="search-input"
    >
  </div>

  <div *ngIf="isLoading" class="loading-spinner">Cargando...</div>

  <div class="menu-grid" *ngIf="!isLoading">
    <div *ngFor="let product of products" class="product-card">
      <img [src]="product.imagen_url || 'assets/placeholder.png'" [alt]="product.nombre" class="product-image">
      <div class="product-info">
        <h3>{{ product.nombre }}</h3>
        <p class="product-description">{{ product.descripcion }}</p>
        <div class="product-footer">
          <span class="product-price">{{ product.precio | currency:'MXN' }}</span>
          <button class="add-to-cart-btn" [disabled]="product.stock === 0" (click)="handleAddItem(product)">
            {{ product.stock > 0 ? 'AÃ±adir' : 'Agotado' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<a routerLink="/carrito" class="cart-fab" *ngIf="(cartItemCount$ | async) as count">
  ðŸ›’ <span class="cart-badge" *ngIf="count > 0">{{ count }}</span>
</a>

<app-modifier-modal
  *ngIf="isModalOpen"
  [product]="selectedProduct"
  (confirm)="onConfirmProduct($event)"
  (close)="closeModal()">
</app-modifier-modal>
